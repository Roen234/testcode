<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <link rel="stylesheet" href="staticFiles/style.css">
</head>
<body style="transition: margin 0.25s cubic-bezier(0, 0, 0.3, 1) 0s; margin-left: 0px;">
    <div class="para">
      <div class="content fade-in">
        <div class="navbar-no-shadow" id="sidebar">
          <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease"
            role="banner" class="navbar-no-shadow-container w-nav">
            <div class="container-regular">
              <div class="navbar-wrapper">
                <nav role="navigation" class="nav-menu-w2rapper w-nav-menu">
                  <ul role="list" class="nav-menu w-list-unstyled">
                    <li> <img src="staticFiles/OIG.png" alt="" width="128" height="128"></li>
                    <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                    <li><a href="#" class="nav-link" style="color:white"><span>About
                      <i class="fa-duotone fa-solid fa-circle-info"></i></li> </span></a></li>
                    <li><a href="#" class="nav-link" style="color:white"><span><i class="fa-duotone fa-briefcase-blank"></i> Projects</span></a></li>
                    <br> <br>
                    <li><a href="news" class="nav-link" style="color:white"><span><i class="fa-duotone fa-newspaper"></i> Latest News</span></a></li>
                    <br> <br>
                    <li><a href="#" class="nav-link" style="color:white"><span><i class="fa-duotone fa-phone-office"></i> Contact Me</span></a></li>
                    <li>
                      <div data-hover="false" data-delay=2"0" class="nav-dropdown w-dropdown">
                        <div class="nav-dropdown-toggle w-dropdown-toggle" id="w-dropdown-toggle-0"
                          aria-controls="w-dropdown-list-0" aria-haspopup="menu" aria-expanded="false" role="button"
                          tabindex="0">
                          <div aria-hidden="true"></div>
                          <div><i class="fa-duotone fa-brain"></i> Skills</div>
                        </div>
                        <nav class="nav-dropdown-list shadow-three mobile-shadow-hide w-dropdown-list"
                          id="w-dropdown-list-0" aria-labelledby="w-dropdown-toggle-0"><a href="#"
                            class="nav-dropdown-link w-dropdown-link" tabindex="0"><i class="fa-duotone fa-code"></i> Programming</a><a href="#"></a>
                            <a href='#' class="nav-dropdown-link w-dropdown-link" tabindex="0"><i class="fa-duotone fa-paintbrush"></i> Design</a><a href="#"></a>
  
  
                        </nav>
                        <li>
                          
    <!-- Logout Button -->
    <button id="logoutButton" onclick="logout()" style="width:140px"><i class="fa-duotone fa-right-from-bracket"></i> Log Out</button>
                        </li>
                      </div>
                    </li>
                  </ul>
  
  
                </nav>
                <div class="menu-button w-nav-button" style="user-select: text;" aria-label="menu" role="button"
                  tabindex="0" aria-controls="w-nav-overlay-0" aria-haspopup="menu" aria-expanded="false">
                  <div class="fa fa-bars"></div>
                </div>
              </div>
            </div>
            <div class="w-nav-overlay" data-wf-ignore="" id="w-nav-overlay-0"></div>
          </div>
        </div>

{% if email == 'endriroen@gmail.com' %}

    <!-- Form to create a new card -->
      <!-- This will require additional logic -->
  <form id="addCardForm">
    <input type="text" id="cardTitle" placeholder="Card Title" required>
    <textarea id="cardContent" placeholder="Card Content" required></textarea>
    <input type="submit" value="Add Card">
  </form>

    <!-- Placeholder for cards list -->
    <div id="cardsContainerAdmin">
        <!-- Cards will be populated here -->
    </div>

    <script>
        document.getElementById('addCardForm').addEventListener('submit', function(event) {
            event.preventDefault();

            // Get form data
            var title = document.getElementById('cardTitle').value;
            var content = document.getElementById('cardContent').value;

            // TODO: Send an AJAX request to the server to create a new card
            // On success, clear the form and refresh the list of cards
        });
    </script>
{% else %}
 
{% endif %}
   <!-- Placeholder for cards list -->

   <div id="cardsContainer">
    <!-- Cards will be dynamically added here -->
  </div>
  
  <!-- Only show this form if the user is an admin -->


        <section class="footer-dark">
          <div class="container">
            <div class="footer-wrapper"><a href="#" class="footer-brand w-inline-block"><img src="staticFiles/OIG.png" alt="" width="160" height="160"></a>
              <div class="footer-content">
                <div id="w-node-faa2bba8-7086-4fe6-68fc-ac9305bbfe72-913c2914" class="footer-block">
                  <div class="title-small">Company</div><a href="#" class="footer-link">How it works</a><a href="#"
                    class="footer-link">Pricing</a><a href="#" class="footer-link">Docs</a>
                </div>
                <div id="w-node-faa2bba8-7086-4fe6-68fc-ac9305bbfe7b-913c2914" class="footer-block">
                  <div class="title-small">Resources</div><a href="#" class="footer-link">Blog post name list goes
                    here</a><a href="#" class="footer-link">Blog post name list goes here</a><a href="#"
                    class="footer-link">Blog post
                    name list goes here</a><a href="#" class="footer-link">See all resources &gt;</a>
                </div>
                <div id="w-node-faa2bba8-7086-4fe6-68fc-ac9305bbfe86-913c2914" class="footer-block">
                  <div class="title-small">About</div><a href="#" class="footer-link">Terms &amp; Conditions</a><a
                    href="#" class="footer-link">Privacy policy</a>
                  <div class="footer-social-block"><a href="#" class="footer-social-link w-inline-block"><img
                        src="https://uploads-ssl.webflow.com/62434fa732124a0fb112aab4/62434fa732124ac15112aad5_twitter%20small.svg"
                        loading="lazy" alt=""></a><a href="#" class="footer-social-link w-inline-block"><img
                        src="https://uploads-ssl.webflow.com/62434fa732124a0fb112aab4/62434fa732124a389912aad8_linkedin%20small.svg"
                        loading="lazy" alt=""></a><a href="#" class="footer-social-link w-inline-block"><img
                        src="https://uploads-ssl.webflow.com/62434fa732124a0fb112aab4/62434fa732124a51bf12aae9_youtube%20small.svg"
                        loading="lazy" alt=""></a></div>
                </div>
              </div>
            </div>
          </div>
          <div class="footer-divider"></div>
          <div class="footer-copyright-center">Copyright Â© 2021 Company name</div>
        </section>
        <script
          src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=64f70476fd252fcf913c2908"
          type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
          crossorigin="anonymous"></script>
        <script src="https://uploads-ssl.webflow.com/64f70476fd252fcf913c2908/js/webflow.4d981810f.js"
          type="text/javascript"></script>
        <div id="vt-sidebar-root">
          <div id="vt-sidebar-container" class="css-1xahjpf css-1gfm7th css-1yw75t3 css-azetmj css-i87elh ">
            <div
              style="position: relative; user-select: auto; border-image: linear-gradient(rgb(255, 131, 7) 0%, rgb(255, 176, 112) 100%) 30 / 1 / 0 stretch; width: 320px; height: 100%; max-width: 800px; min-width: 250px; box-sizing: border-box; flex-shrink: 0;">
              <div style="display: flex; height: 100%;">
                <div style="flex: 1 1 0%;"></div>
              </div>
              <div></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
  
    </script>
  
    <script>
      function logout() {
        // Making a request to the server to log out
        // This assumes there's a '/logout' endpoint on your server that handles the logout process
        window.location.href = "/logout";
      }
  
     </script>

<script type="text/javascript">
  $(document).ready(function() {
      function addCardToPage(card) {
          var cardHTML = '<div class="card" data-id="' + card.id + '">' +
              '<h3>' + card.title + '</h3>' +
              '<p>' + card.content + '</p>' +
              '<button class="deleteCard" data-id="' + card.id + '">Delete</button>' +
              '</div>';
          $('#cardsContainer').append(cardHTML);
      }

      // Function to handle the form submission for adding cards
      $('#addCardForm').submit(function(event) {
          event.preventDefault();  // Prevent the default form submission

          var formData = {
              'card_title': $('#cardTitle').val(),
              'card_content': $('#cardContent').val()
          };

          $.ajax({
              type: 'POST',
              url: '/add_card',
              data: formData,
              dataType: 'json',
              encode: true
          }).done(function(data) {
              console.log(data);  
              // Clear the form fields after the submission
              $('#cardTitle').val('');
              $('#cardContent').val('');

              // Add the new card to the page
              addCardToPage({'id': data.card_id, 'title': formData.card_title, 'content': formData.card_content});
          }).fail(function(error) {
              console.error("Failed to add card:", error);
          });
      });

      // Function to handle deleting cards
      $(document).on('click', '.deleteCard', function() {
          var cardId = $(this).data('id');

          $.ajax({
              type: 'POST',
              url: '/delete_card',
              data: { card_id: cardId },
              dataType: 'json',
              encode: true
          }).done(function(data) {
              console.log(data);  
              // Remove the card element from the page
              $('.card[data-id="' + cardId + '"]').remove();
          }).fail(function(error) {
              console.error("Failed to delete card:", error);
          });
      });

      // Load existing cards when the page loads
      $.get('/get_cards', function(cards) {
          cards.forEach(function(card) {
              addCardToPage(card);
          });
      });
  });
</script>
  
    <script>
      window.onload = function () {
        document.body.style.backgroundImage = "url('data:image/jpeg;base64,{{ bg }}')";
        document.body.style.backgroundRepeat = "no-repeat";
        document.body.style.backgroundSize = "300% 300%";
        document.body.style.backgroundAttachment = "fixed"; // This ensures the background stays fixed on scroll
  
        window.addEventListener("scroll", function () {
          let offset = window.pageYOffset;
          document.body.style.backgroundPositionY = offset * -0.3 + "px"; // This creates the parallax effect
        });
      };
  
    </script>
  </body>
</html>